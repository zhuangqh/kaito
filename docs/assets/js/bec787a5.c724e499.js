"use strict";(self.webpackChunkkaito_website=self.webpackChunkkaito_website||[]).push([[2459],{3143:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>r,metadata:()=>o,toc:()=>c});var s=t(4848),i=t(8453);const r={title:"AWS Setup"},a=void 0,o={id:"aws",title:"AWS Setup",description:"This guide covers setting up auto-provisioning capabilities for KAITO on Amazon Elastic Kubernetes Service (EKS). Auto-provisioning allows KAITO to automatically create GPU nodes when needed for your AI workloads.",source:"@site/docs/aws.md",sourceDirName:".",slug:"/aws",permalink:"/kaito/docs/next/aws",draft:!1,unlisted:!1,editUrl:"https://github.com/kaito-project/kaito/tree/main/website/docs/aws.md",tags:[],version:"current",frontMatter:{title:"AWS Setup"},sidebar:"sidebar",previous:{title:"Azure Setup",permalink:"/kaito/docs/next/azure"},next:{title:"Inference",permalink:"/kaito/docs/next/inference"}},l={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Understanding Auto-Provisioning on AWS",id:"understanding-auto-provisioning-on-aws",level:2},{value:"Setup Auto-Provisioning",id:"setup-auto-provisioning",level:2},{value:"Create EKS Cluster and install Karpenter",id:"create-eks-cluster-and-install-karpenter",level:3},{value:"Using Auto-Provisioning",id:"using-auto-provisioning",level:3},{value:"Supported AWS GPU Instance Types",id:"supported-aws-gpu-instance-types",level:2},{value:"Clean Up",id:"clean-up",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"This guide covers setting up auto-provisioning capabilities for KAITO on Amazon Elastic Kubernetes Service (EKS). Auto-provisioning allows KAITO to automatically create GPU nodes when needed for your AI workloads."}),"\n",(0,s.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["An EKS cluster with KAITO workspace controller installed (see ",(0,s.jsx)(n.a,{href:"installation",children:"Installation"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html",children:"AWS CLI"})," for managing AWS resources"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://eksctl.io/installation/",children:"eksctl"})," for EKS cluster management"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://kubernetes.io/docs/tasks/tools/",children:"kubectl"})," configured to access your EKS cluster"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"understanding-auto-provisioning-on-aws",children:"Understanding Auto-Provisioning on AWS"}),"\n",(0,s.jsxs)(n.p,{children:["KAITO can use ",(0,s.jsx)(n.a,{href:"https://karpenter.sh/",children:"Karpenter"})," to automatically provision GPU nodes. This controller:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Creates new GPU nodes when workspaces require specific instance types"}),"\n",(0,s.jsx)(n.li,{children:"Supports various AWS GPU instances (g4, g5, p3, p4 series, etc.)"}),"\n",(0,s.jsx)(n.li,{children:"Manages node lifecycle based on workload demands"}),"\n",(0,s.jsx)(n.li,{children:"Integrates with AWS IAM for secure access"}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["Alternative: If you already have GPU nodes or manage them separately, use the preferred nodes approach in the ",(0,s.jsx)(n.a,{href:"quick-start",children:"Quick Start"})," instead."]})}),"\n",(0,s.jsx)(n.h2,{id:"setup-auto-provisioning",children:"Setup Auto-Provisioning"}),"\n",(0,s.jsx)(n.h3,{id:"create-eks-cluster-and-install-karpenter",children:"Create EKS Cluster and install Karpenter"}),"\n",(0,s.jsxs)(n.p,{children:["Follow the instructions ",(0,s.jsx)(n.a,{href:"https://karpenter.sh/docs/getting-started/getting-started-with-karpenter/",children:"here"})," to create an EKS cluster and install Karpenter."]}),"\n",(0,s.jsx)(n.p,{children:"Then update the KAITO workspace controller Helm chart values for AWS:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"helm update kaito-workspace --namespace kaito-workspace --set cloudProviderName=aws\n"})}),"\n",(0,s.jsx)(n.h3,{id:"using-auto-provisioning",children:"Using Auto-Provisioning"}),"\n",(0,s.jsx)(n.p,{children:"Once Karpenter is set up, you can create workspaces that automatically provision GPU nodes:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",metastring:'title="phi-4-workspace.yaml"',children:'apiVersion: kaito.sh/v1beta1\nkind: Workspace\nmetadata:\n  name: workspace-phi-4-mini\nresource:\n  instanceType: "g5.4xlarge" # Will trigger node creation\n  labelSelector:\n    matchLabels:\n      apps: phi-4-mini\ninference:\n  preset:\n    name: phi-4-mini-instruct\n'})}),"\n",(0,s.jsx)(n.p,{children:"Apply the workspace:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kubectl apply -f phi-4-workspace.yaml\n"})}),"\n",(0,s.jsx)(n.h2,{id:"supported-aws-gpu-instance-types",children:"Supported AWS GPU Instance Types"}),"\n",(0,s.jsxs)(n.p,{children:["The GPU provisioner supports various AWS GPU SKUs, see ",(0,s.jsx)(n.a,{href:"https://github.com/kaito-project/kaito/blob/main/pkg/sku/aws_sku_handler.go",children:"supported options here"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["For the complete list and specifications, see the ",(0,s.jsx)(n.a,{href:"https://docs.aws.amazon.com/dlami/latest/devguide/gpu.html",children:"AWS GPU instance documentation"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"clean-up",children:"Clean Up"}),"\n",(0,s.jsxs)(n.p,{children:["See the Karpenter documentation for instructions on how to clean up your EKS cluster and remove Karpenter ",(0,s.jsx)(n.a,{href:"https://karpenter.sh/docs/getting-started/getting-started-with-karpenter/#9-delete-the-cluster",children:"here"}),"."]})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>o});var s=t(6540);const i={},r=s.createContext(i);function a(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);